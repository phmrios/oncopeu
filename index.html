<!doctype html>
<html lang="pt-BR" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <title>Hub Split — dois sites lado a lado (P&B)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="color-scheme" content="light dark" />
    <meta
      name="description"
      content="Dois sites diferentes, simultaneamente, em painéis redimensionáveis. Preto & branco. WCAG 2.2 A."
    />
    <style>
      /* Tema preto & branco de alto contraste */
      :root {
        --bg: #ffffff; /* branco */
        --fg: #000000; /* preto */
        --muted: #2b2b2b; /* cinza escuro para textos secundários */
        --border: #000000;
        --focus: #000000; /* foco preto espesso (B&W puro) */
        --gap: 0.75rem;
        --panel-min: 220px; /* largura/altura mínima dos painéis */
        --toolbar-h: 48px; /* altura das toolbars */
      }
      @media (prefers-color-scheme: dark) {
        /* Mesmo P&B, invertendo: fundo preto, texto branco */
        :root {
          --bg: #000000;
          --fg: #ffffff;
          --muted: #e6e6e6;
          --border: #ffffff;
          --focus: #ffffff;
        }
      }

      * {
        box-sizing: border-box;
      }
      html,
      body {
        height: 100%;
      }
      body {
        margin: 0;
        background: var(--bg);
        color: var(--fg);
        font:
          500 16px/1.55 ui-sans-serif,
          system-ui,
          -apple-system,
          Segoe UI,
          Roboto,
          Arial,
          Noto Sans;
      }

      /* Foco bem visível e uniforme */
      :where(a, button, [tabindex], input, select, textarea):focus-visible {
        outline: 3px solid var(--focus);
        outline-offset: 2px;
      }

      /* Skip link para acessibilidade */
      .skip-link {
        position: absolute;
        left: -9999px;
        top: auto;
        padding: 0.5rem 0.75rem;
        background: var(--fg);
        color: var(--bg);
      }
      .skip-link:focus {
        left: 0.75rem;
        top: 0.75rem;
        z-index: 9999;
      }

      /* Cabeçalho minimalista (mas com controles úteis) */
      header {
        height: var(--toolbar-h);
        border-bottom: 2px solid var(--border);
        display: flex;
        align-items: center;
        gap: var(--gap);
        padding: 0 0.75rem;
      }
      .brand {
        font-weight: 800;
        letter-spacing: 0.2px;
      }
      .spacer {
        flex: 1;
      }
      .btn {
        appearance: none;
        background: transparent;
        color: var(--fg);
        border: 2px solid var(--border);
        border-radius: 6px;
        padding: 0.35rem 0.6rem;
        font-weight: 700;
        cursor: pointer;
      }
      .btn:hover {
        background: var(--fg);
        color: var(--bg);
      }
      .btn[aria-pressed="true"] {
        background: var(--fg);
        color: var(--bg);
      }

      main {
        height: calc(100vh - var(--toolbar-h));
      }

      /* Área de split: duas direções possíveis (vertical ou horizontal) */
      .split {
        position: relative;
        width: 100%;
        height: 100%;
        display: grid;
        gap: 0; /* sem bordas internas para look P&B limpo */
      }
      /* Layout vertical (painéis lado a lado) */
      .split[data-orientation="vertical"] {
        grid-template-columns: 1fr 8px 1fr;
        grid-template-rows: 100%;
      }
      /* Layout horizontal (painéis um sobre o outro) */
      .split[data-orientation="horizontal"] {
        grid-template-rows: 1fr 8px 1fr;
        grid-template-columns: 100%;
      }

      /* Painéis */
      .panel {
        min-width: var(--panel-min);
        min-height: var(--panel-min);
        display: grid;
        grid-template-rows: var(--toolbar-h) 1fr;
        border: 2px solid var(--border);
      }
      .panel header {
        height: var(--toolbar-h);
        border-bottom: 2px solid var(--border);
        padding: 0 0.5rem;
        gap: 0.5rem;
      }
      .panel-title {
        font-weight: 800;
      }
      .panel .btn {
        padding: 0.25rem 0.5rem;
      }

      /* Iframes (conteúdo intacto) */
      .frame {
        width: 100%;
        height: 100%;
        border: 0;
        background: var(--bg);
      }

      /* Divisor (grip) grande e acessível */
      .divider {
        background: var(--fg);
        cursor: col-resize;
      }
      .split[data-orientation="horizontal"] .divider {
        cursor: row-resize;
      }

      /* Handle visual no divisor (pontos) — ainda B&W */
      .divider::before {
        content: "";
        display: block;
        margin: auto;
        width: 28px;
        height: 8px;
        background: repeating-linear-gradient(
          to right,
          var(--bg) 0,
          var(--bg) 3px,
          var(--fg) 3px,
          var(--fg) 6px
        );
      }
      .split[data-orientation="horizontal"] .divider::before {
        width: 8px;
        height: 28px;
        background: repeating-linear-gradient(
          to bottom,
          var(--bg) 0,
          var(--bg) 3px,
          var(--fg) 3px,
          var(--fg) 6px
        );
      }
      .divider:focus-visible {
        outline: 3px solid var(--focus);
        outline-offset: 0;
      }

      /* Texto auxiliar */
      .help {
        font-size: 0.92rem;
        color: var(--muted);
        padding: 0.25rem 0.5rem;
        border-left: 2px solid var(--border);
        margin-left: 0.5rem;
      }

      @media (prefers-reduced-motion: reduce) {
        * {
          scroll-behavior: auto !important;
          transition: none !important;
          animation: none !important;
        }
      }
    </style>
  </head>
  <body>
    <a class="skip-link" href="#conteudo">Pular para o conteúdo</a>

    <header role="banner" aria-label="Cabeçalho">
      <div class="brand" aria-label="Identificação da página">Hub Split</div>
      <div class="help" aria-hidden="true">
        Atalhos: Ctrl+Shift+V alterna orientação · Ctrl+Seta ajusta divisor · F
        para tela cheia do painel focado
      </div>
      <div class="spacer"></div>
      <button
        type="button"
        class="btn"
        id="btnOrientation"
        aria-pressed="false"
        aria-label="Alternar orientação (vertical/horizontal)"
      >
        Orientação: Vertical
      </button>
    </header>

    <main id="conteudo" role="main">
      <section
        class="split"
        id="split"
        data-orientation="vertical"
        aria-label="Área com dois painéis redimensionáveis"
      >
        <!-- Painel esquerdo / superior -->
        <section class="panel" id="panel-o" aria-label="Painel do Site O">
          <header role="toolbar" aria-label="Ferramentas do Painel O">
            <div class="panel-title">Site O</div>
            <div class="spacer"></div>
            <button
              type="button"
              class="btn"
              data-full="o"
              aria-label="Tela cheia do Site O"
            >
              Tela cheia
            </button>
            <a
              class="btn"
              href="indexo.html"
              target="_blank"
              rel="noopener"
              aria-label="Abrir Site O em nova aba"
              >Nova aba</a
            >
          </header>
          <iframe
            class="frame"
            id="frame-o"
            title="Site O (conteúdo intacto)"
            src="indexo.html"
            loading="lazy"
            referrerpolicy="no-referrer"
          ></iframe>
        </section>

        <!-- Divisor acessível -->
        <div
          class="divider"
          id="divider"
          role="separator"
          tabindex="0"
          aria-label="Divisor entre painéis"
          aria-orientation="vertical"
          aria-valuemin="15"
          aria-valuemax="85"
          aria-valuenow="50"
        ></div>

        <!-- Painel direito / inferior -->
        <section class="panel" id="panel-s" aria-label="Painel do Site S">
          <header role="toolbar" aria-label="Ferramentas do Painel S">
            <div class="panel-title">Site S</div>
            <div class="spacer"></div>
            <button
              type="button"
              class="btn"
              data-full="s"
              aria-label="Tela cheia do Site S"
            >
              Tela cheia
            </button>
            <a
              class="btn"
              href="indexs.html"
              target="_blank"
              rel="noopener"
              aria-label="Abrir Site S em nova aba"
              >Nova aba</a
            >
          </header>
          <iframe
            class="frame"
            id="frame-s"
            title="Site S (conteúdo intacto)"
            src="indexs.html"
            loading="lazy"
            referrerpolicy="no-referrer"
          ></iframe>
        </section>
      </section>

      <noscript>
        <p>JavaScript desativado. Acesse diretamente:</p>
        <ul>
          <li><a href="indexo.html">Site O</a></li>
          <li><a href="indexs.html">Site S</a></li>
        </ul>
      </noscript>
    </main>

    <script>
      // KISS + SRP: poucas funções, cada uma com responsabilidade clara.
      const $ = (sel) => document.querySelector(sel);

      const split = $("#split");
      const divider = $("#divider");
      const panelO = $("#panel-o");
      const panelS = $("#panel-s");
      const btnOrientation = $("#btnOrientation");

      // Estado: proporção do primeiro painel (em %); orientação 'vertical'| 'horizontal'
      let percent = 50;
      let orientation = split.getAttribute("data-orientation"); // 'vertical' por padrão
      let dragging = false;

      function applyLayout() {
        // Define template conforme orientação e percentuais
        if (orientation === "vertical") {
          split.style.gridTemplateColumns = `${percent}% 8px ${100 - percent}%`;
          split.style.gridTemplateRows = "100%";
          divider.setAttribute("aria-orientation", "vertical");
          btnOrientation.textContent = "Orientação: Vertical";
        } else {
          split.style.gridTemplateRows = `${percent}% 8px ${100 - percent}%`;
          split.style.gridTemplateColumns = "100%";
          divider.setAttribute("aria-orientation", "horizontal");
          btnOrientation.textContent = "Orientação: Horizontal";
        }
        divider.setAttribute("aria-valuenow", String(Math.round(percent)));
      }

      function setPercent(next) {
        // Mantém de 15% a 85% para não colapsar
        percent = Math.max(15, Math.min(85, next));
        applyLayout();
      }

      // Alternar orientação (Ctrl+Shift+V ou botão)
      function toggleOrientation() {
        orientation = orientation === "vertical" ? "horizontal" : "vertical";
        split.setAttribute("data-orientation", orientation);
        btnOrientation.setAttribute(
          "aria-pressed",
          orientation === "horizontal" ? "true" : "false",
        );
        applyLayout();
      }

      // Cálculo de percent com base no mouse
      function calcPercentFromEvent(e) {
        const rect = split.getBoundingClientRect();
        if (orientation === "vertical") {
          const x = e.clientX - rect.left;
          return (x / rect.width) * 100;
        } else {
          const y = e.clientY - rect.top;
          return (y / rect.height) * 100;
        }
      }

      // Eventos de arraste do divisor
      divider.addEventListener("mousedown", (e) => {
        dragging = true;
        e.preventDefault();
        divider.focus();
      });
      window.addEventListener("mousemove", (e) => {
        if (!dragging) return;
        setPercent(calcPercentFromEvent(e));
      });
      window.addEventListener("mouseup", () => {
        dragging = false;
      });

      // Suporte a toque
      divider.addEventListener(
        "touchstart",
        (e) => {
          dragging = true;
          divider.focus();
        },
        { passive: true },
      );
      window.addEventListener(
        "touchmove",
        (e) => {
          if (!dragging) return;
          const t = e.touches[0];
          if (!t) return;
          setPercent(calcPercentFromEvent(t));
        },
        { passive: true },
      );
      window.addEventListener("touchend", () => {
        dragging = false;
      });

      // Teclado no divisor: setas ajustam 2%, Shift+seta ajusta 10%
      divider.addEventListener("keydown", (e) => {
        const big = e.shiftKey ? 10 : 2;
        if (orientation === "vertical") {
          if (e.key === "ArrowLeft") {
            e.preventDefault();
            setPercent(percent - big);
          }
          if (e.key === "ArrowRight") {
            e.preventDefault();
            setPercent(percent + big);
          }
        } else {
          if (e.key === "ArrowUp") {
            e.preventDefault();
            setPercent(percent - big);
          }
          if (e.key === "ArrowDown") {
            e.preventDefault();
            setPercent(percent + big);
          }
        }
        if ((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === "v") {
          e.preventDefault();
          toggleOrientation();
        }
      });

      // Botão de orientação
      btnOrientation.addEventListener("click", toggleOrientation);
      window.addEventListener("keydown", (e) => {
        if (
          (e.ctrlKey || e.metaKey) &&
          e.shiftKey &&
          e.key.toLowerCase() === "v"
        ) {
          e.preventDefault();
          toggleOrientation();
        }
        // F para fullscreen do painel focado (o botão ou o iframe precisam estar focados)
        if (e.key.toLowerCase() === "f") {
          const active = document.activeElement;
          if (!active) return;
          // Prioriza painel pai do elemento focado
          const panel = active.closest?.(".panel");
          if (panel) {
            const iframe = panel.querySelector(".frame");
            toggleFullscreen(iframe || panel);
          }
        }
      });

      // Tela cheia por botão em cada painel
      document.querySelectorAll("[data-full]").forEach((btn) => {
        btn.addEventListener("click", () => {
          const target =
            btn.getAttribute("data-full") === "o"
              ? $("#frame-o")
              : $("#frame-s");
          toggleFullscreen(target || document.documentElement);
        });
      });

      function toggleFullscreen(el) {
        if (!document.fullscreenElement) {
          el.requestFullscreen?.();
        } else {
          document.exitFullscreen?.();
        }
      }

      // Inicialização
      window.addEventListener("resize", applyLayout);
      window.addEventListener("DOMContentLoaded", () => {
        applyLayout();
        // Hash opcional: #o-first ou #s-first para iniciar com proporção 70/30
        const h = (location.hash || "").toLowerCase();
        if (h.includes("o-first")) setPercent(70);
        if (h.includes("s-first")) setPercent(30);
      });
    </script>
  </body>
</html>
